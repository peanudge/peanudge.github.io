<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">프론트엔드 웹성능 최적화 | Peaut Lover Tech Blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://peanut-lover.github.io/blog/web-performance-optimization"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="프론트엔드 웹성능 최적화 | Peaut Lover Tech Blog"><meta data-rh="true" name="description" content="프론트엔드 웹성능 최적화 기법들 정리"><meta data-rh="true" property="og:description" content="프론트엔드 웹성능 최적화 기법들 정리"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-03-10T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/peanut-lover"><meta data-rh="true" property="article:tag" content="web,performance,lighthouse"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://peanut-lover.github.io/blog/web-performance-optimization"><link data-rh="true" rel="alternate" href="https://peanut-lover.github.io/blog/web-performance-optimization" hreflang="en"><link data-rh="true" rel="alternate" href="https://peanut-lover.github.io/blog/web-performance-optimization" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Peaut Lover Tech Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Peaut Lover Tech Blog Atom Feed">



<link rel="alternate" type="application/rss+xml" href="/story/rss.xml" title="Peaut Lover Tech Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/story/atom.xml" title="Peaut Lover Tech Blog Atom Feed"><link rel="stylesheet" href="/assets/css/styles.c1afb734.css">
<link rel="preload" href="/assets/js/runtime~main.694df362.js" as="script">
<link rel="preload" href="/assets/js/main.c15cab21.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Peanut Lover Tech Blog</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Frontend</a><a class="navbar__item navbar__link" href="/docs">Document</a><a class="navbar__item navbar__link" href="/story">Story</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/peanut-lover" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/web-performance-optimization">프론트엔드 웹성능 최적화</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/reactjs-escape-hatch-effect-and-ref">Escape Hatch of ReactJS - Ref and Effect</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/renewal-react-document">ReactJS의 새로운 문서 받아들이기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/mermaid-for-document">문서화를 잘하기 위한 시각화 도구 - Mermaid</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/utterances">블로그 리뷰 기능 추가하기(Utterances 위젯)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/react-native-on-mono-repo">Mono Repo(Nx)에 React Native 앱 세팅하기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/component-tracking-with-ast">AST 분석을 활용해서 컴포넌트 추적해보기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/20230-intro">블로그 시작을 알리며...</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">프론트엔드 웹성능 최적화</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-03-10T00:00:00.000Z" itemprop="datePublished">March 10, 2023</time> · <!-- -->24 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/peanut-lover" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/20085849?v=4" alt="Jiho Shon"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/peanut-lover" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jiho Shon</span></a></div><small class="avatar__subtitle" itemprop="description">Frontend Developer in miso.inc</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><div style="width:100%;display:flex"><img loading="lazy" src="/assets/images/web-performance-book-2d41741ad460c5c2bf7ea8108c74cef1.jpg" width="300" alt="Example banner" style="margin:0 auto" class="img_ev3q"></div><br><p>프론트엔드 개발자의 작업 중 마지막 피날레 아무래도 <strong>성능 최적화</strong>라고 말할 수 있습니다. 웹 프론트엔드의 성능을 저하시키는 요인들이 어떤 것들이 있는지 살펴보고 그에 대한 해법들도 한번 정리해보겠습니다.</p><p>이 글에서 정리하는 내용들은 &quot;프론트엔드 성능 최적화 가이드&quot;라는 책을 기반으로 정리한 내용이니 실습과 함께 성능 최적화에 대한 지식을 쌓고 싶으시면 책을 보시는 것을 추천드립니다.</p><br><p>이번 글을 정리하면서 성능을 저하시키는 요인들을 시각화해서 정리해본 것입니다. 각 요인별로 하위에는 어떤 문제들이 파생해서 존재하는지 정리해보고 그에 대한 간단한 해법들을 남겨보겠습니다.</p><p>잘 기억해서 실제 웹사이트에서 각 요인별로 분석 후 최적화 해보시는 것을 추천드립니다!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="프론트엔드-성능-최적화는-무엇인가">프론트엔드 성능 최적화는 무엇인가?<a href="#프론트엔드-성능-최적화는-무엇인가" class="hash-link" aria-label="Direct link to 프론트엔드 성능 최적화는 무엇인가?" title="Direct link to 프론트엔드 성능 최적화는 무엇인가?">​</a></h2><p>우선, 우리가 성능 최적화 자체을 어떻게 바라볼지 정리를 먼저해보겠습니다.</p><p>나이브하게 정의해주면 웹 성능은 브라우저에서 얼마나 빨리 웹 페이지를 보여주고 기능을 수행하는지를 나타냅니다.</p><p>크게 로딩 속도와 렌더링 속도로 나눠서 생각할 수 있습니다. 네! 로딩과 렌더링만 생각하면 됩니다.</p><ul><li>웹 리소스(html, css, javascript)를 가져오는 속도인 <strong>로딩 속도</strong></li></ul><ul><li>가져온 리소스를 이용해서 브라우저가 화면을 구성하는 속도를 <strong>렌더링 성능</strong></li></ul><p>위 두 가지 카테고리에서 구체적으로 어떤 성능을 최적화할 수 있는지를 살펴보기 전에</p><p>우리가 왜 화면을 빨리 보여줘야하는지 주관적으로 판단하지말고 객관적으로 비지니스에 어떤 영향을 끼치는지 알아볼 필요가 있습니다.</p><p>그래야 저희가 진행한 혹은 진행할 성능 최적화 작업들을 수행하고 팀원들에게 그 중요성을 납득할 수 있을 것입니다.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>성능 최적화를 진행하기 전에 How 보다는 Why를 생각해보아야합니다.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="왜-웹-성능-최적화가-필요할까요">왜 웹 성능 최적화가 필요할까요?<a href="#왜-웹-성능-최적화가-필요할까요" class="hash-link" aria-label="Direct link to 왜 웹 성능 최적화가 필요할까요?" title="Direct link to 왜 웹 성능 최적화가 필요할까요?">​</a></h3><p>그 이유는 구글의 조사에서 확인할 수 있습니다.</p><blockquote><p>구글은 아주 오래 전부터 웹 성능에 관심을 가져왔고 성능을 높이기 위해 다양한 시도를 해왔습니다.</p></blockquote><p>구글 리서치 자료 중 <a href="https://www.thinkwithgoogle.com/marketing-strategies/app-and-mobile/mobile-page-speed-new-industry-benchmarks/" target="_blank" rel="noopener noreferrer"><code>성능이 비즈니스에 얼마나 영향끼치는지</code></a> 조사한 자료가 있습니다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">People want to quickly pay bills on finance sites,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get rapid results when they’re browsing vacation reviews,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">and view an article immediately when they click through.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">And if there’s too much friction, they’ll abandon the site and move on.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>사람들은 결제 사이트에서 빨리 돈을 지불하고 결과를 확인하고 싶어합니다.</code> 이 내용만 살펴봐도 사용자의 이탈을 막기 위해서는 납득가능할만한 속도를 제공해야합니다.</p><div style="width:100%;display:flex"><img loading="lazy" src="/assets/images/mobile-page-speed-benchmarks-6f23f61220de884b92692233da34df98.jpeg" width="600" alt="web performance" style="margin:0 auto" class="img_ev3q"></div><br><p><strong>납득 가능할만한 속도</strong> 가 어느정도인지 주관적으로 판단하는 것은 모호합니다. 그래서 구글에서는 <code>web vital</code> 이라는 적절한 웹 성능에 대한 기준 지표를 제공해주고 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="성능-분석-도구">성능 분석 도구<a href="#성능-분석-도구" class="hash-link" aria-label="Direct link to 성능 분석 도구" title="Direct link to 성능 분석 도구">​</a></h2><p>크롬 개발자 도구를 이용하면 어느정도 수준의 분석이 다 가능할 정도로 잘 활용만하면 훌륭한 도구인 것 같습니다.</p><p>다만, 어떤 기능이 있고 각 기능이 무엇을 의미하는지는 경험을 통해 학습하지 않으면 머리에 잘 안 남는 것 같습니다.</p><ul><li>크롬 개발자 도구의 Performance<ul><li>Critical Rendering Path 확인</li><li>FrameDrop 확인</li><li>network blocking을 유발하는 지점 탐색</li><li>병목 자바스크립트 탐색</li></ul></li><li>크롬 개발자 도구의 Light House<ul><li>전체적인 성능 지표를 판단하는 단계에 활용</li><li><code>Opportunity</code>탭을 통해 무엇이 문제인지 제시해주기도함.</li></ul></li><li>크롬 개발자 도구의 Network<ul><li>네트워크를 통해 받아오는 리소스가 Cache가 활용되는지 확인(<code>Cache-Control</code>)</li><li>리소스(이미지, 코드) 사이즈 체크</li></ul></li><li><code>bundle-analyzer</code>를 이용한 번들 사이즈 체크</li></ul><p>당장 생각나는 문제들과 분석 툴들과 연결해서 확인할 수 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="로딩-성능---코드-번들-사이즈-최적화">로딩 성능 - 코드 번들 사이즈 최적화<a href="#로딩-성능---코드-번들-사이즈-최적화" class="hash-link" aria-label="Direct link to 로딩 성능 - 코드 번들 사이즈 최적화" title="Direct link to 로딩 성능 - 코드 번들 사이즈 최적화">​</a></h2><p>대표적인 성능 문제로 꼽히는 번들링된 코드의 사이즈입니다.</p><p>클라이언트 사이드 렌더링을 하는 웹 앱을 개발 할 경우, 시간이 지날 수록 번들 사이즈가 늘어나는 것은 어쩔 수 없는 것 같습니다.</p><p>특히, 모바일 앱의 웹뷰에 올라갈 웹앱을 만들 계획이라면 번들 사이즈가 로딩 속도에 치명적이기에 잘못하면 매우 높은 이탈율로 이어질 수 있습니다. (SPA 기반의 앱이라면 더욱 주의!)
이에 대한 대표적인 해법으로 <code>코드 분할</code> 기법이 있습니다.</p><p>여러 페이지로 구성되거나 첫 화면을 렌더링할 때 필요하지 않은 코드를 분할해서 필요할 때 로딩할 수 있도록 분리하는 방법입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트-지연-로딩">컴포넌트 지연 로딩<a href="#컴포넌트-지연-로딩" class="hash-link" aria-label="Direct link to 컴포넌트 지연 로딩" title="Direct link to 컴포넌트 지연 로딩">​</a></h3><p><a href="https://webpack.js.org/guides/code-splitting/#dynamic-imports" target="_blank" rel="noopener noreferrer">https://webpack.js.org/guides/code-splitting/#dynamic-imports</a></p><p>번들러인 웹팩은 코드를 분할 해서 번들링할 수 있도록 Dynamic Import 라는 기능을 제공해줍니다.</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./page/DetailPage&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">module</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">DetailPage</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> module</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>다만, 위 처럼 promise 형태로 반환되어서 리액트에서 컴포넌트를 바로 사용하기에는 불편함이 있습니다.</p><p>하지만 React의 <code>Suspense</code>와 <code>lazy</code>를 활용하면 동적 import된 컴포넌트 모듈을 바로 쉽게 사용할 수 있습니다.</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Suspense</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">SomeComponent</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">lazy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./SomeComponent&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">MyComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">fallback</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;</span><span class="token tag script language-javascript tag" style="color:#00009f">div</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&gt;</span><span class="token tag script language-javascript plain-text" style="color:#00009f">Loading...</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag script language-javascript tag" style="color:#00009f">div</span><span class="token tag script language-javascript tag punctuation" style="color:#393A34">&gt;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">SomeComponent</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>MyComponent</code>를 렌더링 하는 시점에서야 <code>SomeComponent</code> 모듈을 불러올 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컴포넌트-사전-로딩">컴포넌트 사전 로딩<a href="#컴포넌트-사전-로딩" class="hash-link" aria-label="Direct link to 컴포넌트 사전 로딩" title="Direct link to 컴포넌트 사전 로딩">​</a></h3><p>위와 같이 분할하면 필요할 시점에 컴포넌트를 가져올 수 있습니다.</p><p>하지만 코드를 분할해서 lazy-loading을 이용해서 컴포넌트를 나중에 불러올 때 번들을 불러오는 시간은 사라지지 않습니다.</p><p>예를들어, 모달의 사이즈가 커서 모달 관련 컴포넌트를 코드 분할해서 모달이 뜨는 시점에 한다고 가정하겠습니다.</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Modal</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./Modal&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> lazy</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Suspense</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">LazyModal</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">lazy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./Modal&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">MyComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isOpenMoal</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setIsOpenModal</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">handleOpenModal</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setIsOpenModal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">handleCloseModal</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setIsOpenModal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Click button if you want to see modal.</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">handleModal</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Open</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">fallback</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript keyword null nil" style="color:#00009f">null</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Modal</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">open</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">isOpenMoal</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">handleCloseModal</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Close</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Modal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위 처럼 분할된 컴포넌트를 클릭시 로딩한다면 클릭 후 딜레이가 생기기 마련입니다.</p><p>이런 문제는 컴포넌트가 마운트된 후 버튼을 누르기 전에 사전 로딩을 통해 쉽게 해결할 수 있습니다.</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Modal</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./Modal&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> lazy</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Suspense</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">LazyModal</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">lazy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./Modal&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">MyComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">isOpenMoal</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setIsOpenModal</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">handleOpenModal</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setIsOpenModal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">handleCloseModal</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setIsOpenModal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> _ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./Modal&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// preload</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Click button if you want to see modal.</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">handleModal</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Open</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">fallback</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript keyword null nil" style="color:#00009f">null</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Modal</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">open</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">isOpenMoal</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">button</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">handleCloseModal</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Close</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">button</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Modal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Suspense</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="로딩-성능---이미지-최적화">로딩 성능 - 이미지 최적화<a href="#로딩-성능---이미지-최적화" class="hash-link" aria-label="Direct link to 로딩 성능 - 이미지 최적화" title="Direct link to 로딩 성능 - 이미지 최적화">​</a></h2><p>웹 사이트를 돌아다니며 확인해보면 Web Vital의 <code>LCP</code>(Largest Contentful Paint) 점수를 깍아먹는 요소들은 크기가 큰 이미지임을 쉽게 확인해볼 수 있습니다.</p><p>이미지가 늦게 로딩되면 고객들은 <strong>웹사이트가 느리다</strong>는 느낌을 강하게 줄 수 있습니다.</p><p>이번에는 이미지를 어떻게 처리해야 이미지 로딩 성능을 개선할 수 있을지 살펴보겠습니다.</p><p>크게 이미지 로딩을 개선해 줄 3가지 요소가 있습니다.</p><ul><li>적절한 이미지 사이즈를 적용</li><li>압축률이 좋은 이미지의 압축 포맷을 적용 (<code>webp</code>)</li><li>Cache 활용 (<code>Cache-Control</code> 혹은 CDN 활용)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="적절한-이미지-사이즈란">적절한 이미지 사이즈란?<a href="#적절한-이미지-사이즈란" class="hash-link" aria-label="Direct link to 적절한 이미지 사이즈란?" title="Direct link to 적절한 이미지 사이즈란?">​</a></h3><p>이미지의 사이즈 최적화는 이미지의 로딩 속도와 완벽히 반비례하기 때문에 적용이 쉬우면서도 효과적인 최적화 요소입니다.</p><p>비효율적인 이미지들이란 rendered size 보다 본래의 사이즈가 더 큰 이미지를 말합니다. 차이가 없는데 높은 해상도를 가지게 되는 것이 비효율적인 것이죠.</p><p>만약 그런 문제를 가진 웹사이트에서 light house 검사를 실행해보면 이미지 크기를 비교해서 원본 이미지 보다 4kb 작은 상태로 렌더링되면</p><p><code>Properly size images</code>라는 경고를 줍니다.</p><blockquote><p>아래 링크에서는 반응형 이미지에 대한 구체적인 가이드를 제시해줍니다.
<a href="https://developer.chrome.com/docs/lighthouse/performance/uses-responsive-images/" target="_blank" rel="noopener noreferrer">https://developer.chrome.com/docs/lighthouse/performance/uses-responsive-images/</a></p></blockquote><p>::: Tip</p><p>이미지의 사이즈는 어느 정도로 지정하는 것이 좋을까요?</p><p>rendered size 랑 일치시켜서 이미지를 준비해도 되지만 레티나 디스플레이는 같은 공간(픽셀)에 더 많은 픽셀을 그릴 수 있다고 합니다.</p><p>너비 기준으로 <strong>두 배</strong> 정도 큰 이미지를 사용하는 것이 좋다고합니다.</p><p>:::</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="압축률이-높은-이미지-포맷-선택">압축률이 높은 이미지 포맷 선택<a href="#압축률이-높은-이미지-포맷-선택" class="hash-link" aria-label="Direct link to 압축률이 높은 이미지 포맷 선택" title="Direct link to 압축률이 높은 이미지 포맷 선택">​</a></h3><p>렌더링 되어 보여지는 이미지의 크기 자체가 화면을 덮을 정도면 사실 위에서 봤던 사이즈 최적화로 성능을 개선하기는 어려울 수 있습니다.</p><p>이미지 최적화를 위해 하나 더해볼 수 있는 최적화 기법이 있습니다. 바로 포맷을 바꿔보는 것입니다.</p><p>비트맵 이미지 포맷은 대표적으로 세 가지가 있습니다.</p><ul><li>PNG: 무손실 압축 방식으로 원본을 훼손 없이 압축하며 알파 채널(투명한 배경)을 지원하는 이미지 포맷입니다.</li><li>JPG(JPEG): 압축 과정에서 정보 손실이 발생합니다.</li><li>WebP: 무손실, 손실 압축 모두 제공하는 최신 이미지 포맷, PNG, JPG에 비해 훨씬 효율적인 이미지 압축 가능</li></ul><p>사이즈: PNG &gt; JPG &gt; WebP
화질: PNG = WebP &gt; JPG
호환성: PNG = JPG &gt; WebP</p><p>이렇게 정리해볼 수 있습니다.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p><strong>WebP</strong></p><p><a href="https://developers.google.com/speed/webp?hl=ko" target="_blank" rel="noopener noreferrer">https://developers.google.com/speed/webp?hl=ko</a></p><blockquote><p>WebP 무손실 이미지는 PNG에 비해 크기가 26% 더 작습니다. WebP 손실 이미지는 동등한 SSIM 품질 색인에서 비슷한 JPEG 이미지보다 25~34% 더 작습니다.</p></blockquote></div></div><p>우선 이렇게만 봤을 때, WebP를 안쓸 이유는 없을 것 같습니다. 하지만 모든 브라우저에서 사용가능한 포맷이 아니기에 특별한 처리를해줘야합니다.</p><p>만약 이미지를 가지고 계시다면 <a href="https://squoosh.app/" target="_blank" rel="noopener noreferrer"><code>Squoosh</code></a> 라는 웹 서비스를 이용하면 간단하게 이미지의 사이즈 뿐아니라 포맷도 변환해서 얻을 수 있습니다.</p><p><code>.webp</code> 포맷의 이미지 얻었다면 아래와 같이 호환성을 고려해서 <code>&lt;picture/&gt;</code> 태그를 활용할 수 있습니다.</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">picture</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">source</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">srcset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">image.webp</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">image/webp</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">image.jpg</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">picture</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위와 같이 처리해주면 webp를 지원하는 브라우저는 <code>webp</code> 포맷의 이미지를 보여줄 수 있습니다. 직접 해보시면 거의 절반정도의 이미지가 압축되는 모습을 볼 수 있습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="서버-사이드에서-cache-control를-적절히-설정해서-캐시-효과">서버 사이드에서 <code>Cache-Control</code>를 적절히 설정해서 캐시 효과<a href="#서버-사이드에서-cache-control를-적절히-설정해서-캐시-효과" class="hash-link" aria-label="Direct link to 서버-사이드에서-cache-control를-적절히-설정해서-캐시-효과" title="Direct link to 서버-사이드에서-cache-control를-적절히-설정해서-캐시-효과">​</a></h2><p>이번에는 프론트엔드 개발자의 영역을 조금 벗어나서 최적화를 해보겠습니다.</p><p><code>Cache-Control</code> 이라는 HTTP Header를 아시나요? 서버에서 받는 응답을 확인해보면 <code>Cache-Control: public, max-age=3000</code>라는 헤더를 확인할 수 있습니다.</p><p>이 헤더를 보고 브라우저는 다음에 동일한 리소스를 요청할 때 캐시된 리소스를 활용할지 다시 서버에 요청해서 받아올지를 결정하게 됩니다.</p><p>HTTP 의 캐시 정책은 역사도 길고 HTTP1.0~2.0 버젼이 올라가면서 많은 스팩이 있지만 이번에는 Cache-Control만 살펴보겠습니다.</p><p><code>Cache-Control</code> 의 값으로는 대표적으로 5가지 값이 조합되어 들어갑니다.</p><ul><li><p><code>no-cache</code>: 캐시를 사용하기 전 서버에 검사 후 사용. status code <code>304 Not Modified</code> 로 응답이 오면 리소스의 변화가 없으니 캐시를 사용하라는 뜻이 됩니다.</p></li><li><p><code>no-store</code>: 캐시 사용 안함. 항상 서버에서 새로운 리소스를 요청하고 응답받아 사용</p></li><li><p><code>public</code>: 모든 환경에서 캐시 사용 가능</p></li><li><p><code>private</code>: 브라우저 환경에만 캐시 사용, 외부 캐시 서버에서는 사용 불가. 중간 서버에서 캐시를 적용하고 싶지 않을 때 사용</p></li><li><p><code>max-age</code>: 캐시 유효 시간</p></li></ul><p>몇 가시 예시를 보면 쉽게 이해할 수 있습니다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Cache-Control:  max-age=60</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>60초 동안 캐시를 사용합니다. <code>private</code> 옵션이 없으므로 기본값인 <code>public</code>으로 설정되어 모든 환경에서 캐시를 합니다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Cache-Control: private, max-age=600</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>브라우저 환경에서만 600초(10분) 동안 캐시를 사용합니다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Cache-Control: public, max-age=0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>모든 환경에서 0초 동안 캐시를 사용합니다. <code>no-cache</code> 와 동일한 설정입니다.</p><p>위 개념을 이해하고 리소스의 종류별로 캐시 시간을 적절히 설정해볼 수 있습니다.</p><p>HTML 파일은 늘 최신화되어야하니 <code>no-cache</code> 가 적절합니다. HTML이 캐시될 경우, 늘 이전 버젼의 CSS파일과 JS파일을 가져오게됩니다.</p><p>반면에 자바스크립트와 CSS파일은 번들러에 의해 변화가 생기면 새로운 Hash값으로 파일 이름이 수정될 수 있으니 캐시를 길게 적용해도 상관없습니다.</p><p>정리하자면,</p><ul><li>HTML 파일: <code>Cache-Control: no-cache</code></li><li>JS, CSS, IMG: <code>Cache-Control: public max-age=31536000</code></li></ul><p>위와 같이 설정할 수 있습니다.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>image를 전달해줄 저장소 서버의 위치를 개선해서 로딩 성능을 개선할 수도 있습니다.</p><p>CDN(Content Delivery Network) 자체가 물리적 거의 한계를 극복하기 위해 소비자(사용자)와 가까운 곳에 콘텐츠 서버를 두는 것입니다.</p><p><code>imgix</code> 와 같은 이미지 CDN 솔루션을 고려해보는 것이 좋은 방법입니다.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="로딩-성능---비디오-최적화">로딩 성능 - 비디오 최적화<a href="#로딩-성능---비디오-최적화" class="hash-link" aria-label="Direct link to 로딩 성능 - 비디오 최적화" title="Direct link to 로딩 성능 - 비디오 최적화">​</a></h2><p>이미지 최적화와 유사한 방식으로 비디오 리소스도 최적화 할 수 있습니다.</p><p>같은 맥락으로 <code>webm</code> 포맷은 압축률이 높은 비디오 포맷입니다.</p><p><code>webp</code>와 마찬가지로 모든 브라우저에서 지원하는 포맷은 아니기 때문에 호환성을 고려해서 사용해야합니다.</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">video</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">autoPlay</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">loop</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">muted</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">source</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">/media/cc0-videos/flower.webm</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">video/webm</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">source</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">/media/cc0-videos/flower.mp4</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">video/mp4</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">video</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>영상 편집기를 이용해도 되지만 <a href="https://www.media.io/convert/mp4-to-mp4.html" target="_blank" rel="noopener noreferrer">Media.io</a>라는 서비스를 이용하면 손쉽게 비디오 포맷을 변경할 수 있습니다.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="로딩-성능---폰트-최적화">로딩 성능 - 폰트 최적화<a href="#로딩-성능---폰트-최적화" class="hash-link" aria-label="Direct link to 로딩 성능 - 폰트 최적화" title="Direct link to 로딩 성능 - 폰트 최적화">​</a></h2><blockquote><p><a href="https://d2.naver.com/helloworld/4969726" target="_blank" rel="noopener noreferrer">https://d2.naver.com/helloworld/4969726</a></p></blockquote><p>기본 폰트가 아닌 Custom 폰트를 사용할 경우에도 몇 가지 성능 이슈가 있습니다.</p><p>기본 폰트가 보이고 Custom 폰트 파일 다운이 끝나고나서야 폰트 변경이 발생해서 깜빡이는 모습을 보이게되고 페이지가 느리다는 인상을 줄 수 있습니다.</p><p>그리고 폰트 변경이 다른 요소를 밀어내서 Layout Shift가 발생할 가능성도 있습니다.</p><p>폰트 파일을 최적화하기 전에 FOUT와 FOIT 현상에 대해 알아야합니다.</p><blockquote><p><a href="https://rockcontent.com/blog/foit-vs-fout-comparison-webfont-loading/" target="_blank" rel="noopener noreferrer">https://rockcontent.com/blog/foit-vs-fout-comparison-webfont-loading/</a></p></blockquote><ul><li><p><strong>FOUT</strong>(Flash of Unstyled Text): Edge 브라우저에서 폰트를 로드하는 방식으로, 폰트의 다운로드 여부와 상관없이 보여준 후 폰트가 다운로드되면 그 때 폰트를 적용하는 방식</p></li><li><p><strong>FOIT</strong>(Flash of Invisible Text): Chrome, 사파리, 파이어폭스 등에서 폰트를 로드하는 방식으로, 폰트가 완전히 다운로드 되기 전까지 텍스트를 보여주지 않습니다. 그리고 폰트가 다운되고 적용된 텍스트를 보여줍니다.</p></li></ul><p>하지만 실제 브라우저에서는 FOIT라고 해서 무한정 폰트파일을 받을 동안 기다리지 않습니다. 대부분 3초만 기다리는 FOIT를 사용하고 있습니다. 3초가 지나도 폰트가 다운로드되지 않으면 기본 폰트로 텍스트를 보여 줍니다. 그런 다음 폰트가 다운로드되면 해당 폰트를 적용합니다.</p><p>다소 폰트처리 방식이 복잡할 수 있고 어떤 방식이 더 좋다고 말할 수 없습니다. 상황에 따라 더 적절한 방법이 있을 것 같습니다.</p><p>그렇다면 어떻게 폰트 로딩 성능을 최적화할 수 있을지 살펴보겠습니다.</p><p>SubsetFont 생성해서 폰트 파일 사이즈 줄이기 <code>@font-face</code> 활용</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="로딩-성능---서버사이드에서-캐시-정책을-리소스마다-선정-text-압축을-게이트웨이-서버에-적용">로딩 성능 - 서버사이드에서 캐시 정책을 리소스마다 선정, text 압축을 게이트웨이 서버에 적용<a href="#로딩-성능---서버사이드에서-캐시-정책을-리소스마다-선정-text-압축을-게이트웨이-서버에-적용" class="hash-link" aria-label="Direct link to 로딩 성능 - 서버사이드에서 캐시 정책을 리소스마다 선정, text 압축을 게이트웨이 서버에 적용" title="Direct link to 로딩 성능 - 서버사이드에서 캐시 정책을 리소스마다 선정, text 압축을 게이트웨이 서버에 적용">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="렌더링-성능---css-애니메이션-최적화">렌더링 성능 - CSS 애니메이션 최적화<a href="#렌더링-성능---css-애니메이션-최적화" class="hash-link" aria-label="Direct link to 렌더링 성능 - CSS 애니메이션 최적화" title="Direct link to 렌더링 성능 - CSS 애니메이션 최적화">​</a></h2><p>브라우저 렌더링 과정에 대해 이해하면 성능에 예의 주시할 수 있다.</p><p>Reflow, Repaint</p><p>Frame Drop 해결법 =&gt; <code>will-change</code>, <code>transform</code>, <code>opacity</code> GPU 활용</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="렌더링-성능---이미지-layout-shift-해결">렌더링 성능 - 이미지 Layout Shift 해결<a href="#렌더링-성능---이미지-layout-shift-해결" class="hash-link" aria-label="Direct link to 렌더링 성능 - 이미지 Layout Shift 해결" title="Direct link to 렌더링 성능 - 이미지 Layout Shift 해결">​</a></h2><p>미리 공간확보, 리액트 component 도구 활용</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="렌더링-성능---리액트-리렌더링-최소화">렌더링 성능 - 리액트 리렌더링 최소화<a href="#렌더링-성능---리액트-리렌더링-최소화" class="hash-link" aria-label="Direct link to 렌더링 성능 - 리액트 리렌더링 최소화" title="Direct link to 렌더링 성능 - 리액트 리렌더링 최소화">​</a></h2><p>React Reconcilation을 잘 알고 리렌더링을 최소화하는 습관들을 익혀둔다.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/web">web</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/performance">performance</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/lighthouse">lighthouse</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/blog/reactjs-escape-hatch-effect-and-ref"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Escape Hatch of ReactJS - Ref and Effect</div></a></nav><div style="margin-top:20px"><section></section></div></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#프론트엔드-성능-최적화는-무엇인가" class="table-of-contents__link toc-highlight">프론트엔드 성능 최적화는 무엇인가?</a><ul><li><a href="#왜-웹-성능-최적화가-필요할까요" class="table-of-contents__link toc-highlight">왜 웹 성능 최적화가 필요할까요?</a></li></ul></li><li><a href="#성능-분석-도구" class="table-of-contents__link toc-highlight">성능 분석 도구</a></li><li><a href="#로딩-성능---코드-번들-사이즈-최적화" class="table-of-contents__link toc-highlight">로딩 성능 - 코드 번들 사이즈 최적화</a><ul><li><a href="#컴포넌트-지연-로딩" class="table-of-contents__link toc-highlight">컴포넌트 지연 로딩</a></li><li><a href="#컴포넌트-사전-로딩" class="table-of-contents__link toc-highlight">컴포넌트 사전 로딩</a></li></ul></li><li><a href="#로딩-성능---이미지-최적화" class="table-of-contents__link toc-highlight">로딩 성능 - 이미지 최적화</a><ul><li><a href="#적절한-이미지-사이즈란" class="table-of-contents__link toc-highlight">적절한 이미지 사이즈란?</a></li><li><a href="#압축률이-높은-이미지-포맷-선택" class="table-of-contents__link toc-highlight">압축률이 높은 이미지 포맷 선택</a></li></ul></li><li><a href="#서버-사이드에서-cache-control를-적절히-설정해서-캐시-효과" class="table-of-contents__link toc-highlight">서버 사이드에서 <code>Cache-Control</code>를 적절히 설정해서 캐시 효과</a></li><li><a href="#로딩-성능---비디오-최적화" class="table-of-contents__link toc-highlight">로딩 성능 - 비디오 최적화</a></li><li><a href="#로딩-성능---폰트-최적화" class="table-of-contents__link toc-highlight">로딩 성능 - 폰트 최적화</a></li><li><a href="#로딩-성능---서버사이드에서-캐시-정책을-리소스마다-선정-text-압축을-게이트웨이-서버에-적용" class="table-of-contents__link toc-highlight">로딩 성능 - 서버사이드에서 캐시 정책을 리소스마다 선정, text 압축을 게이트웨이 서버에 적용</a></li><li><a href="#렌더링-성능---css-애니메이션-최적화" class="table-of-contents__link toc-highlight">렌더링 성능 - CSS 애니메이션 최적화</a></li><li><a href="#렌더링-성능---이미지-layout-shift-해결" class="table-of-contents__link toc-highlight">렌더링 성능 - 이미지 Layout Shift 해결</a></li><li><a href="#렌더링-성능---리액트-리렌더링-최소화" class="table-of-contents__link toc-highlight">렌더링 성능 - 리액트 리렌더링 최소화</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Tech Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Frontend Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/story">Story Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/docs">Document</a></li><li class="footer__item"><a href="https://github.com/peanut-lover" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.694df362.js"></script>
<script src="/assets/js/main.c15cab21.js"></script>
</body>
</html>